{{ dir "/etc" }}{{ name "supervisord.conf" }}
[supervisord]
nodaemon  = true
user      = root
loglevel  = {{ default .Env.SUPERVISOR_LOG_LEVEL "INFO" }}

[unix_http_server]
file=/var/run/supervisor.sock
chmod=0700

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock

[program:pia]
command                 = python -u /usr/local/bin/pia_transmission_monitor.py
autostart               = true
stdout_logfile          = /dev/stdout
stdout_logfile_maxbytes = 0
stderr_logfile          = /dev/stderr
stderr_logfile_maxbytes = 0

[program:cleaner]
command                 = python -u /usr/local/bin/torrent_cleaner.py -H 127.0.0.1 -p {{ .Env.RPC_PORT }} -f {{ .Env.CLEAN_FREQUENCY }} -r {{ .Env.RATIO_LIMIT }}
stdout_logfile          = /dev/stderr
stdout_logfile_maxbytes = 0
stderr_logfile          = /dev/stderr
stderr_logfile_maxbytes = 0
