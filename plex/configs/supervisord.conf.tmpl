{{ dir "/etc/supervisor" }}{{ name "supervisord.conf" }}
[supervisord]
nodaemon         = true
user             = root
loglevel         = {{ default .Env.SUPERVISOR_LOG_LEVEL "INFO" }}
logfile          = /dev/stderr
logfile_maxbytes = 0

[unix_http_server]
file  = /var/run/supervisor.sock
chmod = 0700

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl = unix:///var/run/supervisor.sock

[program:plexmediaserver]
command                 = /usr/local/bin/start_pms
directory               = /usr/lib/plexmediaserver
user                    = root
pidfile                 = /plexmediaserver/pms.pid
autostart               = true
autorestart             = unexpected
stopasgroup             = true
stdout_logfile          = /dev/stderr
stdout_logfile_maxbytes = 0
stderr_logfile          = /dev/stderr
stderr_logfile_maxbytes = 0

[program:updater]
command                 = escarole -C /escarole.yaml -i 24h
stdout_logfile          = /dev/stderr
stdout_logfile_maxbytes = 0
stderr_logfile          = /dev/stderr
stderr_logfile_maxbytes = 0
